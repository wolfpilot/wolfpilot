{"version":3,"sources":["main.js"],"names":["Wolfpilot","window","pubSub","topics","subID","getTopics","publish","topic","data","setTimeout","subscribers","len","length","func","unsubscribe","token","i","j","splice","subscribe","toString","push","_raf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","windowSize","wWidth","wHeight","size","timeout","delay","_setDimensions","innerWidth","innerHeight","width","height","getDimensions","addEventListener","clearTimeout","document","getQueryString","field","href","location","reg","RegExp","string","exec","getClosestParent","el","selector","matchesSelector","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","call","parentElement","scrollToY","headerHeight","getElementById","offsetHeight","easingEquations","easeInSine","pos","Math","cos","PI","easeOutSine","sin","easeInOutSine","easeInOutQuint","pow","scrollTo","hash","speed","easing","scrollY","documentElement","scrollTop","scrollTarget","offsetTop","currentTime","time","max","min","abs","_tick","p","t","getElementsByClassName","bind","getAttribute","replace","lazyload","hasAttribute","setAttribute","removeAttribute","eventTracking","category","action","label","elems","send","newCategory","newAction","newLabel","ga","handler","target","overlay","status","getStatus","open","classList","add","close","remove","modal","showcasedProjects","prevProject","nextProject","wrapper","projects","btnPrev","btnNext","btnClose","activeProject","getShowcasedProjects","getActiveProject","prev","index","next","_handler","e","navigation","header","nav","navItems","burger","goTo","_onResize","wSize","contains","substr","showcase","navTags","showcasedCategory","getShowcasedCategory","showCategory","tags","split","firstElementChild","showAll","hideAll","toggleNav","navItem","project","videoPlayer","video","player","videos","pause","play","caseStudies","tag","json","articles","newTag","JSON","parse"],"mappings":"AAEA,GAAAA,WAAAC,OAAAD,aAEAA,WAAA,WAEA,YAKA,IAAAE,GAAA,WAwCA,GAAAC,MACAC,KAGAC,EAAA,WAEA,MAAAF,IAQAG,EAAA,SAAAC,EAAAC,GAEA,QAAAL,EAAAI,KAIAE,WAAA,WAKA,IAHA,GAAAC,GAAAP,EAAAI,GACAI,EAAAD,EAAAA,EAAAE,OAAA,EAEAD,KACAD,EAAAC,GAAAE,KAAAN,EAAAC,IAGA,IAEA,IAOAM,EAAA,SAAAC,GAEA,IAAA,GAAAC,KAAAb,GAEA,GAAAA,EAAAa,GAEA,IAAA,GAAAC,GAAA,EAAAA,EAAAd,EAAAa,GAAAJ,OAAAK,IAEA,GAAAd,EAAAa,GAAAC,GAAAF,QAAAA,EAIA,MAFAZ,GAAAa,GAAAE,OAAAD,EAAA,GAEAF,CAUA,QAAA,GAQAI,EAAA,SAAAZ,EAAAM,GAEAV,EAAAI,KACAJ,EAAAI,MAIA,IAAAQ,MAAAX,GAAAgB,UAQA,OALAjB,GAAAI,GAAAc,MACAN,MAAAA,EACAF,KAAAA,IAGAE,EAIA,QACAV,UAAAA,EACAC,QAAAA,EACAa,UAAAA,EACAL,YAAAA,MAMAQ,EAAA,WAEA,MAAArB,QAAAsB,uBACAtB,OAAAuB,6BACAvB,OAAAwB,0BACA,SAAAC,GACAzB,OAAAQ,WAAAiB,EAAA,IAAA,QAMAC,EAAA,WAEA,GAAAC,GACAC,EACAC,KACAC,GAAA,EACAC,EAAA,IAEAC,EAAA,WAEAL,EAAA3B,OAAAiC,WACAL,EAAA5B,OAAAkC,YAEAL,EAAAM,MAAAnC,OAAAiC,WACAJ,EAAAO,OAAApC,OAAAkC,YAEAnC,UAAAE,OAAAI,QAAA,cAAAwB,IAIAQ,EAAA,WAEA,OACAV,OAAAA,EACAC,QAAAA,GAmBA,OAdA5B,QAAAsC,iBAAA,SAAA,WAEAC,aAAAT,GAEAA,EAAAtB,WAAAwB,EAAAD,KAIAS,SAAAF,iBAAA,mBAAA,WAEAN,OAKAK,cAAAA,MAQAI,EAAA,SAAAC,GAEA,GAAAC,GAAA3C,OAAA4C,SAAAD,KACAE,EAAA,GAAAC,QAAA,OAAAJ,EAAA,YAAA,KACAK,EAAAF,EAAAG,KAAAL,EAEA,OAAAI,GAAAA,EAAA,GAAA,MAKAE,EAAA,SAAAC,EAAAC,GAOA,IALA,GAAAC,GAAAF,EAAAG,SACAH,EAAAI,uBACAJ,EAAAK,oBACAL,EAAAM,kBAEAN,IAEAE,EAAAK,KAAAP,EAAAC,IAIAD,EAAAA,EAAAQ,aAIA,OAAAR,IAKAS,EAAA,WAEA,GAAAC,GAAApB,SAAAqB,eAAA,UAAAC,aAGAC,GAEAC,WAAA,SAAAC,GACA,OAAAC,KAAAC,IAAAF,GAAAC,KAAAE,GAAA,IAAA,GAEAC,YAAA,SAAAJ,GACA,MAAAC,MAAAI,IAAAL,GAAAC,KAAAE,GAAA,KAEAG,cAAA,SAAAN,GACA,WAAAC,KAAAC,IAAAD,KAAAE,GAAAH,GAAA,IAEAO,eAAA,SAAAP,GACA,OAAAA,GAAA,IAAA,EACA,GAAAC,KAAAO,IAAAR,EAAA,GAEA,IAAAC,KAAAO,IAAAR,EAAA,EAAA,GAAA,KAKAS,EAAA,SAAAC,EAAAC,EAAAC,GAEA,GAAAC,GAAA9E,OAAA8E,SAAAtC,SAAAuC,gBAAAC,UACAC,EAAAzC,SAAAqB,eAAAc,GAAAO,UACAC,EAAA,EAIAC,EAAAlB,KAAAmB,IAAA,GAAAnB,KAAAoB,IAAApB,KAAAqB,IAAAT,EAAAG,EAAArB,GAAAgB,EAAA,KAEAY,EAAA,WAEAL,GAAA,EAAA,EAEA,IAAAM,GAAAN,EAAAC,EACAM,EAAA3B,EAAAc,GAAAY,EAEAA,GAAA,IAEApE,EAAAmE,GAEAxF,OAAA0E,SAAA,EAAAI,GAAAG,EAAAH,GAAAY,IAMAF,KA6BA,OAzBA,YAIA,IAAA,GAFAtC,GAAAV,SAAAmD,uBAAA,aAEA5E,EAAA,EAAAA,EAAAmC,EAAAvC,OAAAI,IAEAmC,EAAAnC,GAAAuB,iBAAA,QAAAoC,EAAAkB,KAAA,KAAA1C,EAAAnC,GAAA8E,aAAA,eAAA,GAAA,eAAA,MAMA,WAGA,GAAAlB,GAAA/B,SAAA+B,KAAAmB,QAAA,IAAA,GAEA,MAAAnB,GAEAD,EAAAC,EAAA,GAAA,kBAOAD,SAAAA,MAMAqB,EAAA,SAAA7C,GAEAA,EAAA8C,aAAA,uBAEA9C,EAAA+C,aAAA,MAAA/C,EAAA2C,aAAA,sBACA3C,EAAAgD,gBAAA,uBAMAC,EAAA,WAEA,GACAC,GACAC,EACAC,EAHAC,EAAA/D,SAAAmD,uBAAA,oBAKAa,EAAA,SAAAC,EAAAC,EAAAC,GAEA3G,OAAA4G,GAAA,OAAA,QAAAH,EAAAC,EAAAC,IAIAE,EAAA,SAAAC,GAEAV,EAAAU,EAAAjB,aAAA,uBACAQ,EAAAS,EAAAjB,aAAA,qBACAS,EAAAQ,EAAAjB,aAAA,oBAEAW,EAAAJ,EAAAC,EAAAC,GAcA,OAVA,YAEA,IAAA,GAAAvF,GAAA,EAAAA,EAAAwF,EAAA5F,OAAAI,IAEAwF,EAAAxF,GAAAuB,iBAAA,QAAAuE,EAAAjB,KAAA,KAAAW,EAAAxF,KAAA,OAQA8F,QAAAA,EACAL,KAAAA,MAUAO,EAAA,WAEA,GAAA7D,GAAAV,SAAAqB,eAAA,WACAmD,EAAA,SAEAC,EAAA,WAEA,OACAD,OAAAA,IAKAE,EAAA,WAEAF,EAAA,OACA9D,EAAAiE,UAAAC,IAAA,cAIAC,EAAA,WAEAL,EAAA,SACA9D,EAAAiE,UAAAG,OAAA,cAIAT,EAAA,WAEA,WAAAG,EAEAE,IAIAG,IAMA,QACAJ,UAAAA,EACAJ,QAAAA,EACAK,KAAAA,EACAG,MAAAA,MAMAE,EAAA,WAEA,IAAA/E,SAAAqB,eAAA,YACA,OAAA,CAGA,IASA2D,GAEAC,EACAC,EAZAC,EAAAnF,SAAAqB,eAAA,YACA+D,EAAAD,EAAAhC,uBAAA,kBAEAkC,EAAArF,SAAAqB,eAAA,kBACAiE,EAAAtF,SAAAqB,eAAA,kBACAkE,EAAAvF,SAAAqB,eAAA,mBAEAmD,EAAA,SAGAgB,KAIAf,EAAA,WAEA,OACAD,OAAAA,IAKAiB,EAAA,WAEA,MAAAT,IAIAU,EAAA,WAEA,MAAAF,IAIAG,EAAA,WAEA,GAAApH,EAGAyG,GAAAQ,EAAAI,SAAAZ,EAAA,IAEAC,EAAAjF,SAAAqB,eAAA2D,EAAAQ,EAAAI,MAAA,IACArH,EAAAiH,EAAAI,MAAA,IAIAX,EAAAjF,SAAAqB,eAAA2D,EAAAA,EAAA7G,OAAA,IACAI,EAAAyG,EAAA7G,OAAA,GAIAoF,EAAA0B,EAAA9B,uBAAA,cAAA,IACAqC,EAAA9E,GAAAiE,UAAAG,OAAA,cACAG,EAAAN,UAAAC,IAAA,cAEAY,EAAA9E,GAAAuE,EACAO,EAAAI,MAAArH,GAIAsH,EAAA,WAEA,GAAAtH,EAGAyG,GAAAQ,EAAAI,SAAAZ,EAAAA,EAAA7G,OAAA,IAEA+G,EAAAlF,SAAAqB,eAAA2D,EAAAQ,EAAAI,MAAA,IACArH,EAAAiH,EAAAI,MAAA,IAIAV,EAAAlF,SAAAqB,eAAA2D,EAAA,IACAzG,EAAA,GAIAgF,EAAA2B,EAAA/B,uBAAA,cAAA,IACAqC,EAAA9E,GAAAiE,UAAAG,OAAA,cACAI,EAAAP,UAAAC,IAAA,cAEAY,EAAA9E,GAAAwE,EACAM,EAAAI,MAAArH,GAIAmG,EAAA,WAEAF,EAAA,OAEAD,EAAAF,UACAc,EAAAR,UAAAC,IAAA,aAEArB,EAAAiC,EAAA9E,GAAAyC,uBAAA,cAAA,IACAqC,EAAA9E,GAAAiE,UAAAC,IAAA,eAIAC,EAAA,WAEAL,EAAA,SAEAD,EAAAF,UACAc,EAAAR,UAAAG,OAAA,YAEA,KAAA,GAAAvG,GAAA,EAAAA,EAAA6G,EAAAjH,OAAAI,IAEA6G,EAAA7G,GAAAoG,UAAAG,OAAA,eAMAgB,EAAA,SAAAhI,EAAAC,GAEA,OAAAD,GAEA,IAAA,qBAEAkH,EAAAjH,CAEA,MAEA,KAAA,iBAEAyH,EAAA9E,GAAA3C,EAAA2C,GACA8E,EAAAI,MAAA7H,EAAA6H,MAEAlB,GAEA,MAEA,SAEA,OAAA,EAIA,OAAA,EA8CA,OA1CA,YAEAS,EAAArF,iBAAA,QAAA,SAAAiG,GAEAA,EAAAzB,SAAAiB,GACAV,IAGAkB,EAAAzB,SAAAe,GACAM,IAGAI,EAAAzB,SAAAgB,GACAO,MAQA7F,SAAAF,iBAAA,YAAA,SAAAiG,GAEA,SAAAvB,GAAAuB,EAAAzB,SAAAa,GAEAN,SAQA7E,SAAAF,iBAAA,mBAAA,WAIAvC,UAAAE,OAAAiB,UAAA,iBAAAoH,GACAvI,UAAAE,OAAAiB,UAAA,qBAAAoH,MAKArB,UAAAA,EACAiB,iBAAAA,EACAD,qBAAAA,EACAE,KAAAA,EACAE,KAAAA,EACAnB,KAAAA,EACAG,MAAAA,MAMAmB,EAAA,WAEA,GAAAC,GAAAjG,SAAAqB,eAAA,UACA6E,EAAAlG,SAAAqB,eAAA,OACA8E,EAAAD,EAAA/C,uBAAA,aACAiD,EAAApG,SAAAqB,eAAA,aACAmD,EAAA,SAEAE,EAAA,WAEAF,EAAA,OAEAyB,EAAAtB,UAAAC,IAAA,cAIAC,EAAA,WAEAL,EAAA,SAEAyB,EAAAtB,UAAAG,OAAA,cAIAuB,EAAA,SAAA/B,GAEA,IAAA,GAAA/F,GAAA,EAAAA,EAAA4H,EAAAhI,OAAAI,IAEA4H,EAAA5H,GAAAoG,UAAAG,OAAA,YAIAR,GAAAK,UAAAC,IAAA,cAIA0B,EAAA,SAAAxI,EAAAyI,GAIA,SAAA/B,GAAA+B,EAAA5G,OAAA,MAEApC,UAAAgH,QAAAM,QACAA,MAMAiB,EAAA,WAEA,WAAAtB,EAAAE,IAAAG,IAkEA,OA9DA,YAGAqB,EAAApG,iBAAA,QAAA,SAAAiG,GAEAA,EAAAzB,OAAAK,UAAA6B,SAAA,eAEAH,EAAAN,EAAAzB,QAEA/G,UAAA2B,WAAAW,gBAAAV,OAAA,KAGAnB,WAAA,WAEAT,UAAAgH,QAAAM,QACAA,KAEA,QAQAuB,EAAAtG,iBAAA,QAAA,WAEAvC,UAAAgH,QAAAF,UACAyB,SAMA,WAEA,GAAA3D,GAAA3E,OAAA4C,SAAA+B,KAAAsE,OAAA,EAEA,IAAAtE,EAAAhE,OAAA,EAEA,IAAA,GAAAI,GAAA,EAAAA,EAAA4H,EAAAhI,OAAAI,IAEA4H,EAAA5H,GAAA8E,aAAA,iBAAAlB,GAEAkE,EAAAF,EAAA5H,OAUAyB,SAAAF,iBAAA,mBAAA,WAIAvC,UAAAE,OAAAiB,UAAA,cAAA4H,MAKA5B,KAAAA,EACAG,MAAAA,EACAwB,KAAAA,MAMAK,EAAA,WAEA,IAAA1G,SAAAqB,eAAA,eACA,OAAA,CAGA,IAKA2D,GALAG,EAAAnF,SAAAqB,eAAA,eACA6E,EAAAlG,SAAAqB,eAAA,mBACAsF,EAAAxB,EAAAhC,uBAAA,sBACAiC,EAAAD,EAAAhC,uBAAA,uBACAyD,EAAA,WAEApB,KAEAC,EAAA,WAEA,MAAAT,IAIA6B,EAAA,WAEA,MAAAD,IAIAE,EAAA,SAAA7C,GAEA2C,EAAA3C,EACAe,KAGAhH,WAAA,WAEA,IAAA,GAAAO,GAAA,EAAAA,EAAA6G,EAAAjH,OAAAI,IAIA,IAAA,GAFAwI,GAAA3B,EAAA7G,GAAA8E,aAAA,YAAA2D,MAAA,MAEAxI,EAAA,EAAAA,EAAAuI,EAAA5I,OAAAK,IAEAuI,EAAAvI,KAAAyF,IAEAV,EAAA6B,EAAA7G,GAAA0I,mBACA7B,EAAA7G,GAAAoG,UAAAC,IAAA,cAEAI,EAAApG,KAAAwG,EAAA7G,GAAA8E,aAAA,kBAQA,KAGA9F,UAAAE,OAAAI,QAAA,qBAAAmH,IAIAkC,EAAA,WAEAN,EAAA,MACA5B,KAGAhH,WAAA,WAEA,IAAA,GAAAO,GAAA,EAAAA,EAAA6G,EAAAjH,OAAAI,IAEAgF,EAAA6B,EAAA7G,GAAA0I,mBACA7B,EAAA7G,GAAAoG,UAAAC,IAAA,cAEAI,EAAApG,KAAAwG,EAAA7G,GAAA8E,aAAA,iBAIA,KAGA9F,UAAAE,OAAAI,QAAA,qBAAAmH,IAIAmC,EAAA,WAEA,IAAA,GAAA5I,GAAA,EAAAA,EAAA6G,EAAAjH,OAAAI,IAEA6G,EAAA7G,GAAAoG,UAAAG,OAAA,eAMAgB,EAAA,SAAAhI,EAAAmG,GAEAkD,IAEA,QAAAlD,EAAAiD,IAAAJ,EAAA7C,IAIAmD,EAAA,SAAAC,GAEA,IAAA,GAAA9I,GAAA,EAAAA,EAAAoI,EAAAxI,OAAAI,IAEAoI,EAAApI,GAAAoG,UAAAG,OAAA,YAIAuC,GAAA1C,UAAAC,IAAA,aAqEA,OAjEA,YAGAO,EAAArF,iBAAA,QAAA,SAAAiG,GAEA,GAAAA,EAAAzB,OAAAK,UAAA6B,SAAA,qBACAjJ,UAAA2B,WAAAW,gBAAAV,OAAA,MACA5B,UAAA2B,WAAAW,gBAAAT,QAAA,KACA2G,EAAAzB,OAAAK,UAAA6B,SAAA,6BAMA,IAAA,GAJAc,GAAA/J,UAAAkD,iBAAAsF,EAAAzB,OAAA,wBACA5D,EAAAV,SAAAqB,eAAAiG,EAAAjE,aAAA,gBACAiB,EAAAgD,EAAAjE,aAAA,eAEA9E,EAAA,EAAAA,EAAAyG,EAAA7G,OAAAI,IAEAyG,EAAAzG,KAAA+F,IAQAkB,EAAA9E,GAAAA,EACA8E,EAAAI,MAAArH,EAEAhB,UAAAE,OAAAI,QAAA,iBAAA2H,MAWAU,EAAApG,iBAAA,QAAA,SAAAiG,GAEAA,EAAAzB,OAAAK,UAAA6B,SAAA,wBAAAT,EAAAzB,OAAAK,UAAA6B,SAAA,eAEAjJ,UAAAE,OAAAI,QAAA,qBAAAkI,EAAAzB,OAAAjB,aAAA,kBAEA+D,EAAArB,EAAAzB,cAQAtE,SAAAF,iBAAA,mBAAA,WAIAvC,UAAAE,OAAAiB,UAAA,qBAAAoH,GAIAgB,EAAAF,MAMAnB,qBAAAA,EACAoB,qBAAAA,EACAC,aAAAA,EACAI,QAAAA,EACAC,QAAAA,EACAC,UAAAA,MAKAG,EAAA,WAEA,GACAC,GACAC,EAFAC,EAAA1H,SAAAmD,uBAAA,YAGAqB,EAAA,SAEAC,EAAA,WAEA,OACAD,OAAAA,IAKAmD,EAAA,SAAArD,GAEAkD,EAAAjK,UAAAkD,iBAAA6D,EAAA,aACAmD,EAAAD,EAAArE,uBAAA,mBAAA,GAEAqE,EAAA7C,UAAAG,OAAA,cACA2C,EAAAE,QAEAnD,EAAA,UAIAoD,EAAA,SAAAtD,GAEAkD,EAAAjK,UAAAkD,iBAAA6D,EAAA,aACAmD,EAAAD,EAAArE,uBAAA,mBAAA,GAEAqE,EAAA7C,UAAAC,IAAA,cACA6C,EAAAG,OAEApD,EAAA,WAIAsB,EAAA,SAAAxB,GAEA,WAAAE,EAAAoD,EAAAtD,GAAAqD,EAAArD,GAkBA,OAdA,YAEA,IAAA,GAAA/F,GAAA,EAAAA,EAAAmJ,EAAAvJ,OAAAI,IAEAmJ,EAAAnJ,GAAAuB,iBAAA,QAAA,SAAAiG,GAEAD,EAAAC,EAAAzB,cASAG,UAAAA,EACAmD,KAAAA,EACAD,MAAAA,MAKAE,EAAA,WAEA,GAEAd,GACAe,EACAC,EAJA5B,EAAAnG,SAAAmD,uBAAA,0BACA6E,EAAAhI,SAAAmD,uBAAA,sBAKA2D,EAAA,SAAAmB,GAEA,IAAA,GAAA1J,GAAA,EAAAA,EAAAyJ,EAAA7J,OAAAI,IAAA,CAEAwJ,EAAAC,EAAAzJ,GAAA8E,aAAA,aACA0D,EAAAmB,KAAAC,MAAAJ,EAEA,KAAA,GAAAvJ,GAAA,EAAAA,EAAAuI,EAAA5I,OAAAK,IAEAuI,EAAAvI,KAAAyJ,IAEA1E,EAAAyE,EAAAzJ,GAAA4E,uBAAA,uBAAA,IACA6E,EAAAzJ,GAAAoG,UAAAG,OAAA,gBAUAoC,EAAA,WAEA,IAAA,GAAA3I,GAAA,EAAAA,EAAAyJ,EAAA7J,OAAAI,IAEAgF,EAAAyE,EAAAzJ,GAAA4E,uBAAA,uBAAA,IACA6E,EAAAzJ,GAAAoG,UAAAG,OAAA,cAMAsC,EAAA,SAAAa,GAEA,IAAA,GAAA1J,GAAA,EAAAA,EAAA4H,EAAAhI,OAAAI,IAEA4H,EAAA5H,GAAA8E,aAAA,iBAAA4E,GAEA9B,EAAA5H,GAAAoG,UAAAC,IAAA,eAQA,WAEA3E,EAAA,QAEA6H,EAAA7H,EAAA,OAEAmH,EAAAU,GACAhB,EAAAgB,KAIAV,EAAA,OACAF,UAQA,QAEAzJ,OAAAA,EACAyB,WAAAA,EACAe,eAAAA,EACAQ,iBAAAA,EACA8C,SAAAA,EACAI,cAAAA,EAEAqC,WAAAA,EACA7E,UAAAA,EACAoD,QAAAA,EACAQ,MAAAA,EACA2B,SAAAA,EACAa,YAAAA,EACAM,YAAAA","file":"scripts.min.js","sourcesContent":["/** Stuffz */\r\n\r\nvar Wolfpilot = window.Wolfpilot || {};\r\n\r\nWolfpilot = (function() {\r\n\r\n\t'use strict';\r\n\r\n\t/** HELPERS */\r\n\r\n\t// Pub / sub (Observer) decoupling function\r\n\tvar pubSub = (function pubSub() {\r\n\t\t// Credits go to Addy Osmani for most of the code below\r\n\r\n\t\t/* (Possible) real-life example use case:\r\n\r\n\t\t * Create subscriber / observer\r\n\r\n\t\t\tvar subscriber = function(topics, data){\r\n\t\t\t    console.log('Currently on ' + topics + ': ' + data );\r\n\t\t\t};\r\n\r\n\t\t * Add function to the list of subscribers on the topic of 'Spotify'\r\n\t\t * This enables the subscriber to listen to any data changes on the topic\r\n\r\n\t\t\tvar subscription = Wolfpilot.pubSub.subscribe('Spotify', subscriber);\r\n\r\n\t\t * Check the topics list\r\n\r\n\t\t \tWolfpilot.pubSub.getTopics();\r\n\r\n\t\t * Publish / emit some data to the topic 'Spotify'\r\n\t\t * The subscribers of this topic will now be made aware of the data change\r\n\r\n\t\t\tWolfpilot.pubSub.publish('Spotify', 'Hello! Is it me you\\'re looking for?'); // * drama *\r\n\r\n\t\t * Remove original subscriber\r\n\r\n\t\t\tWolfpilot.pubSub.unsubscribe('0'); // arg needs to be a string!!!\r\n\r\n\t\t * Ensure that the subscriber's been removed\r\n\r\n\t\t \tWolfpilot.pubSub.getTopics();\r\n\r\n\t\t * Sudden thought process: the pub / sub pattern helps separate concerns:\r\n\t\t * the subscribers only React (ha!) to the Flow (ha#2 and sudden Eurika moment) of the data,\r\n\t\t * whilst the pubSub function itself is only concerned with handling said data!\r\n\t\t *\r\n\t\t * Amazing, if only I'd invented this pattern * sigh *\r\n\t\t */\r\n\r\n\t\tvar topics = {},\r\n\t\t    subID = -1;\r\n\r\n\t\t// Simple getter to facilitate debugging\r\n\t\tvar getTopics = function getTopics() {\r\n\r\n\t\t\treturn topics;\r\n\r\n\t\t};\r\n\r\n\t\t/* Publish data\r\n\t\t * @topic: Topic to be published\r\n\t\t * @data: Arguments passed to the subscribers\r\n\t\t */\r\n\t\tvar publish = function publish(topic, data) {\r\n\r\n\t\t\tif (!topics[topic]) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\tvar subscribers = topics[topic],\r\n\t\t\t\t    len = subscribers ? subscribers.length : 0;\r\n\r\n\t\t\t\twhile (len--) {\r\n\t\t\t\t\tsubscribers[len].func(topic, data);\r\n\t\t\t\t}\r\n\r\n\t\t\t}, 0);\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t};\r\n\r\n\t\t/* Unsubscribe listener from topic using unique token\r\n\t\t * NOTE: The token specifies the function to be unsubscribed\r\n\t\t */\r\n\t\tvar unsubscribe = function unsubscribe(token) {\r\n\t\t\t// Loop through each topic\r\n\t\t\tfor (var i in topics) {\r\n\t\t\t\t// If a topic exists\r\n\t\t\t\tif (topics[i]) {\r\n\t\t\t\t\t// Loop through each subscriber of the topic\r\n\t\t\t\t\tfor (var j = 0; j < topics[i].length; j++) {\r\n\t\t\t\t\t\t// If the subscriber of the topic has the same token as the one we passed\r\n\t\t\t\t\t\tif (topics[i][j].token === token) {\r\n\t\t\t\t\t\t\t// Remove subscriber\r\n\t\t\t\t\t\t\ttopics[i].splice(j, 1);\r\n\t\t\t\t\t\t\t// and return its token\r\n\t\t\t\t\t\t\treturn token;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t\t/* Subscribe listeners to topic\r\n\t\t * @topic: Topic to subscribe to\r\n\t\t * @func: Function to be called when a new topic is published\r\n\t\t */\r\n\t\tvar subscribe = function subscribe(topic, func) {\r\n\r\n\t\t\tif (!topics[topic]) {\r\n\t\t\t\ttopics[topic] = [];\r\n\t\t\t}\r\n\r\n\t\t\t// Unique token used to identify the function\r\n\t\t\tvar token = (++subID).toString();\r\n\r\n\t\t\t// Store both token and function\r\n\t\t\ttopics[topic].push({\r\n\t\t\t\ttoken: token,\r\n\t\t\t\tfunc: func\r\n\t\t\t});\r\n\r\n\t\t\treturn token;\r\n\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tgetTopics: getTopics,\r\n\t\t\tpublish: publish,\r\n\t\t\tsubscribe: subscribe,\r\n\t\t\tunsubscribe: unsubscribe\r\n\t\t};\r\n\r\n\t}());\r\n\r\n\t// Set up Request Animation Frame and fallback\r\n\tvar _raf = (function _raf() {\r\n\t\t// Thanks go to Paul Irish for this little snippet of code\r\n\t\treturn window.requestAnimationFrame ||\r\n\t\t       window.webkitRequestAnimationFrame ||\r\n\t\t       window.mozRequestAnimationFrame ||\r\n\t\t       function(callback) {\r\n\t\t          window.setTimeout(callback, 1000 / 60);\r\n\t\t       };\r\n\r\n\t}());\r\n\r\n\t// Get the inner width and height of the window\r\n\tvar windowSize = (function windowSize() {\r\n\r\n\t\tvar wWidth,\r\n\t\t    wHeight,\r\n\t\t    size = [],\r\n\t\t    timeout = false,\r\n\t\t    delay = 250; // time to wait before running the callback\r\n\r\n\t\tvar _setDimensions = function _setDimensions() {\r\n\r\n\t\t\twWidth = window.innerWidth;\r\n\t\t\twHeight = window.innerHeight;\r\n\r\n\t\t\tsize.width = window.innerWidth;\r\n\t\t\tsize.height = window.innerHeight;\r\n\r\n\t\t\tWolfpilot.pubSub.publish('Window size', size);\r\n\r\n\t\t};\r\n\r\n\t\tvar getDimensions = function getDimensions() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\twWidth: wWidth,\r\n\t\t\t\twHeight: wHeight\r\n\t\t\t};\r\n\r\n\t\t};\r\n\r\n\t\twindow.addEventListener('resize', function() {\r\n\r\n\t\t\tclearTimeout(timeout);\r\n\r\n\t\t\ttimeout = setTimeout(_setDimensions, delay);\r\n\r\n\t\t});\r\n\r\n\t\tdocument.addEventListener('DOMContentLoaded', function init() {\r\n\r\n\t\t\t_setDimensions();\r\n\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tgetDimensions: getDimensions\r\n\t\t};\r\n\r\n\t}());\r\n\r\n\t/* Get the value of a querystring\r\n\t * @field: The field we're getting the value of, such as 'cat' in '?cat='\r\n\t */\r\n\tvar getQueryString = function getQueryString(field) {\r\n\r\n\t\tvar href = window.location.href,\r\n\t\t    reg = new RegExp('[?&]' + field + '=([^&#]*)', 'i'),\r\n\t\t    string = reg.exec(href);\r\n\r\n\t\treturn string ? string[1] : null;\r\n\r\n\t};\r\n\r\n\t// Get nearest parent element matching selector\r\n\tvar getClosestParent = function getClosestParent(el, selector) {\r\n\r\n\t\tvar matchesSelector = el.matches\r\n\t\t                   || el.webkitMatchesSelector\r\n\t\t                   || el.mozMatchesSelector\r\n\t\t                   || el.msMatchesSelector;\r\n\r\n\t\twhile (el) {\r\n\r\n\t\t\tif (matchesSelector.call(el, selector)) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tel = el.parentElement;\r\n\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\r\n\t};\r\n\r\n\t// Scroll vertically to element\r\n\tvar scrollToY = (function scrollToY() {\r\n\r\n\t\tvar headerHeight = document.getElementById('header').offsetHeight;\r\n\r\n\t\t// Source: https://github.com/danro/easing-js/blob/master/easing.js\r\n\t\tvar easingEquations = {\r\n\r\n\t\t\teaseInSine: function (pos) {\r\n\t\t\t\treturn -Math.cos(pos * (Math.PI / 2)) + 1;\r\n\t\t\t},\r\n\t\t\teaseOutSine: function (pos) {\r\n\t\t\t\treturn Math.sin(pos * (Math.PI / 2));\r\n\t\t\t},\r\n\t\t\teaseInOutSine: function (pos) {\r\n\t\t\t\treturn (-0.5 * (Math.cos(Math.PI * pos) - 1));\r\n\t\t\t},\r\n\t\t\teaseInOutQuint: function (pos) {\r\n\t\t\t\tif ((pos /= 0.5) < 1) {\r\n\t\t\t\t\treturn 0.5 * Math.pow(pos, 5);\r\n\t\t\t\t}\r\n\t\t\t\treturn 0.5 * (Math.pow((pos - 2), 5) + 2);\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar scrollTo = function scrollTo(hash, speed, easing) {\r\n\r\n\t\t\tvar scrollY = window.scrollY || document.documentElement.scrollTop,\r\n\t\t\t    scrollTarget = document.getElementById(hash).offsetTop,\r\n\t\t\t    currentTime = 0;\r\n\r\n\t\t\t// Min time 0.1s, max 0.8s\r\n\t\t\t// Always substract the header's height from the scrolling distance\r\n\t\t\tvar time = Math.max(0.1, Math.min(Math.abs(scrollY - scrollTarget - headerHeight) / speed, 0.8));\r\n\r\n\t\t\tvar\t_tick = function() {\r\n\r\n\t\t\t\tcurrentTime += 1 / 60;\r\n\r\n\t\t\t\tvar p = currentTime / time,\r\n\t\t\t\t    t = easingEquations[easing](p);\r\n\r\n\t\t\t\tif (p < 1) {\r\n\r\n\t\t\t\t\t_raf(_tick);\r\n\r\n\t\t\t\t\twindow.scrollTo(0, scrollY + ((scrollTarget - scrollY) * t));\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\t_tick();\r\n\r\n\t\t};\r\n\r\n\t\t(function bindEvents() {\r\n\r\n\t\t\tvar el = document.getElementsByClassName('js-scroll');\r\n\r\n\t\t\tfor (var i = 0; i < el.length; i++) {\r\n\r\n\t\t\t\tel[i].addEventListener('click', scrollTo.bind(null, el[i].getAttribute('data-target'), 50, 'easeInSine'), false);\r\n\r\n\t\t\t}\r\n\r\n\t\t}());\r\n\r\n\t\t(function scrollOnLoad() {\r\n\r\n\t\t\t// Strip location of hash sign\r\n\t\t\tvar hash = location.hash.replace('#','');\r\n\r\n\t\t\tif (hash !== '') {\r\n\r\n\t\t\t\tscrollTo(hash, 50, 'easeInSine');\r\n\r\n\t\t\t}\r\n\r\n\t\t}());\r\n\r\n\t\treturn {\r\n\t\t\tscrollTo: scrollTo\r\n\t\t};\r\n\r\n\t}());\r\n\r\n\t// Use to lazy load images\r\n\tvar lazyload = function lazyload(el) {\r\n\r\n\t\tif (el.hasAttribute('data-lazyload-src')) {\r\n\r\n\t\t\tel.setAttribute('src', el.getAttribute('data-lazyload-src'));\r\n\t\t\tel.removeAttribute('data-lazyload-src');\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar eventTracking = (function eventTracking() {\r\n\r\n\t\tvar elems = document.getElementsByClassName('js-event-tracker'),\r\n\t\t    category,\r\n\t\t    action,\r\n\t\t    label;\r\n\r\n\t\tvar send = function send(newCategory, newAction, newLabel) {\r\n\r\n\t\t\twindow.ga('send', 'event', newCategory, newAction, newLabel);\r\n\r\n\t\t};\r\n\r\n\t\tvar handler = function handler(target) {\r\n\r\n\t\t\tcategory = target.getAttribute('data-event-category');\r\n\t\t\taction = target.getAttribute('data-event-action');\r\n\t\t\tlabel = target.getAttribute('data-event-label');\r\n\r\n\t\t\tsend(category, action, label);\r\n\r\n\t\t};\r\n\r\n\t\t(function _bindEvents() {\r\n\r\n\t\t\tfor (var i = 0; i < elems.length; i++) {\r\n\r\n\t\t\t\telems[i].addEventListener('click', handler.bind(null, elems[i]), false);\r\n\r\n\t\t\t}\r\n\r\n\t\t}());\r\n\r\n\t\treturn {\r\n\r\n\t\t\thandler: handler,\r\n\t\t\tsend: send\r\n\r\n\t\t};\r\n\r\n\t}());\r\n\r\n\r\n\t/** MAIN */\r\n\r\n\t// Global overlay\r\n\tvar overlay = (function overlay() {\r\n\r\n\t\tvar el = document.getElementById('overlay'),\r\n\t\t    status = 'closed';\r\n\r\n\t\tvar getStatus = function getStatus() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tstatus: status\r\n\t\t\t};\r\n\r\n\t\t};\r\n\r\n\t\tvar open = function open() {\r\n\r\n\t\t\tstatus = 'open';\r\n\t\t\tel.classList.add('is-active');\r\n\r\n\t\t};\r\n\r\n\t\tvar close = function close() {\r\n\r\n\t\t\tstatus = 'closed';\r\n\t\t\tel.classList.remove('is-active');\r\n\r\n\t\t};\r\n\r\n\t\tvar handler = function handler() {\r\n\r\n\t\t\tif (status === 'closed') {\r\n\r\n\t\t\t\topen();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tclose();\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tgetStatus: getStatus,\r\n\t\t\thandler: handler,\r\n\t\t\topen: open,\r\n\t\t\tclose: close\r\n\t\t};\r\n\r\n\t}());\r\n\r\n\t// Showcase image modal\r\n\tvar modal = (function modal() {\r\n\r\n\t\tif (!document.getElementById('js-modal')) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.getElementById('js-modal'),\r\n\t\t    projects = wrapper.getElementsByClassName('modal__project'),\r\n\r\n\t\t    btnPrev = document.getElementById('js-modal--prev'),\r\n\t\t    btnNext = document.getElementById('js-modal--next'),\r\n\t\t    btnClose = document.getElementById('js-modal--close'),\r\n\r\n\t\t    status = 'closed',\r\n\r\n\t\t    showcasedProjects,\r\n\t\t    activeProject = [],\r\n\t\t    prevProject,\r\n\t\t    nextProject;\r\n\r\n\t\tvar getStatus = function getStatus() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tstatus: status\r\n\t\t\t};\r\n\r\n\t\t};\r\n\r\n\t\tvar getShowcasedProjects = function getShowcasedProjects() {\r\n\r\n\t\t\treturn showcasedProjects;\r\n\r\n\t\t};\r\n\r\n\t\tvar getActiveProject = function getActiveProject() {\r\n\r\n\t\t\treturn activeProject;\r\n\r\n\t\t};\r\n\r\n\t\tvar prev = function prev() {\r\n\r\n\t\t\tvar i;\r\n\r\n\t\t\t// Go to the previous slide unless we've reached the first one\r\n\t\t\tif (showcasedProjects[activeProject.index] !== showcasedProjects[0]) {\r\n\r\n\t\t\t\tprevProject = document.getElementById(showcasedProjects[activeProject.index - 1]);\r\n\t\t\t\ti = activeProject.index - 1;\r\n\r\n\t\t\t} else { // otherwise, loop around\r\n\r\n\t\t\t\tprevProject = document.getElementById(showcasedProjects[showcasedProjects.length - 1]);\r\n\t\t\t\ti = showcasedProjects.length - 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlazyload(prevProject.getElementsByClassName('modal__img')[0]);\r\n\t\t\tactiveProject.el.classList.remove('is-visible');\r\n\t\t\tprevProject.classList.add('is-visible');\r\n\r\n\t\t\tactiveProject.el = prevProject;\r\n\t\t\tactiveProject.index = i;\r\n\r\n\t\t};\r\n\r\n\t\tvar next = function next() {\r\n\r\n\t\t\tvar i;\r\n\r\n\t\t\t// Go to the next slide unless we've reached the last one\r\n\t\t\tif (showcasedProjects[activeProject.index] !== showcasedProjects[showcasedProjects.length - 1]) {\r\n\r\n\t\t\t\tnextProject = document.getElementById(showcasedProjects[activeProject.index + 1]);\r\n\t\t\t\ti = activeProject.index + 1;\r\n\r\n\t\t\t} else { // otherwise, loop around\r\n\r\n\t\t\t\tnextProject = document.getElementById(showcasedProjects[0]);\r\n\t\t\t\ti = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlazyload(nextProject.getElementsByClassName('modal__img')[0]);\r\n\t\t\tactiveProject.el.classList.remove('is-visible');\r\n\t\t\tnextProject.classList.add('is-visible');\r\n\r\n\t\t\tactiveProject.el = nextProject;\r\n\t\t\tactiveProject.index = i;\r\n\r\n\t\t};\r\n\r\n\t\tvar open = function open() {\r\n\r\n\t\t\tstatus = 'open';\r\n\r\n\t\t\toverlay.handler();\r\n\t\t\twrapper.classList.add('is-active');\r\n\r\n\t\t\tlazyload(activeProject.el.getElementsByClassName('modal__img')[0]);\r\n\t\t\tactiveProject.el.classList.add('is-visible');\r\n\r\n\t\t};\r\n\r\n\t\tvar close = function close() {\r\n\r\n\t\t\tstatus = 'closed';\r\n\r\n\t\t\toverlay.handler();\r\n\t\t\twrapper.classList.remove('is-active');\r\n\r\n\t\t\tfor (var i = 0; i < projects.length; i++) {\r\n\r\n\t\t\t\tprojects[i].classList.remove('is-visible');\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar _handler = function _handler(topic, data) {\r\n\r\n\t\t\tswitch (topic) {\r\n\r\n\t\t\tcase 'Showcased projects':\r\n\r\n\t\t\t\tshowcasedProjects = data;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'Active project':\r\n\r\n\t\t\t\tactiveProject.el = data.el;\r\n\t\t\t\tactiveProject.index = data.index;\r\n\r\n\t\t\t\topen();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t};\r\n\r\n\t\t(function delegateEvents() {\r\n\r\n\t\t\twrapper.addEventListener('click', function(e) {\r\n\r\n\t\t\t\tif (e.target === btnClose) {\r\n\t\t\t\t\tclose();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.target === btnPrev) {\r\n\t\t\t\t\tprev();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.target === btnNext) {\r\n\t\t\t\t\tnext();\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t/* Prevent modal from closing when accidentally dragging\r\n\t\t\t * from the image to outside its container\r\n\t\t\t */\r\n\t\t\tdocument.addEventListener('mousedown', function(e) {\r\n\r\n\t\t\t\tif (status === 'open' && e.target === wrapper) {\r\n\r\n\t\t\t\t\tclose();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t}());\r\n\r\n\t\tdocument.addEventListener('DOMContentLoaded', function init() {\r\n\r\n\t\t\t// Subscribe the _handler method to listen\r\n\t\t\t// to any changes in the topics below\r\n\t\t\tWolfpilot.pubSub.subscribe('Active project', _handler);\r\n\t\t\tWolfpilot.pubSub.subscribe('Showcased projects', _handler);\r\n\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tgetStatus: getStatus,\r\n\t\t\tgetActiveProject: getActiveProject,\r\n\t\t\tgetShowcasedProjects: getShowcasedProjects,\r\n\t\t\tprev: prev,\r\n\t\t\tnext: next,\r\n\t\t\topen: open,\r\n\t\t\tclose: close\r\n\t\t};\r\n\r\n\t}());\r\n\r\n\t// Main nav\r\n\tvar navigation = (function navigation() {\r\n\r\n\t\tvar header = document.getElementById('header'),\r\n\t\t    nav = document.getElementById('nav'),\r\n\t\t    navItems = nav.getElementsByClassName('nav__item'),\r\n\t\t    burger = document.getElementById('js-burger'),\r\n\t\t    status = 'closed';\r\n\r\n\t\tvar open = function open() {\r\n\r\n\t\t\tstatus = 'open';\r\n\r\n\t\t\theader.classList.add('is-active');\r\n\r\n\t\t};\r\n\r\n\t\tvar close = function close() {\r\n\r\n\t\t\tstatus = 'closed';\r\n\r\n\t\t\theader.classList.remove('is-active');\r\n\r\n\t\t};\r\n\r\n\t\tvar goTo = function goTo(target) {\r\n\r\n\t\t\tfor (var i = 0; i < navItems.length; i++) {\r\n\r\n\t\t\t\tnavItems[i].classList.remove('is-active');\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttarget.classList.add('is-active');\r\n\r\n\t\t};\r\n\r\n\t\tvar _onResize = function _navOnResize(topic, wSize) {\r\n\r\n\t\t\t// Ensures that the nav and overlay are closed if opening the nav on mobile\r\n\t\t\t// then turning the phone in landscape mode\r\n\t\t\tif ((status === 'open') && (wSize.width >= 480)) {\r\n\r\n\t\t\t\tWolfpilot.overlay.close();\r\n\t\t\t\tclose();\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar _handler = function _handler() {\r\n\r\n\t\t\tstatus === 'closed' ? open() : close();\r\n\r\n\t\t};\r\n\r\n\t\t(function _delegateEvents() {\r\n\r\n\t\t\t// listen for category changes\r\n\t\t\tnav.addEventListener('click', function(e) {\r\n\r\n\t\t\t\tif (e.target.classList.contains('nav__item')) {\r\n\r\n\t\t\t\t\tgoTo(e.target);\r\n\r\n\t\t\t\t\tif (Wolfpilot.windowSize.getDimensions().wWidth < 480) {\r\n\r\n\t\t\t\t\t\t// Add a small delay to smooth out the transition\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\t\t\t\tWolfpilot.overlay.close();\r\n\t\t\t\t\t\t\tclose();\r\n\r\n\t\t\t\t\t\t}, 150);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tburger.addEventListener('click', function() {\r\n\r\n\t\t\t\tWolfpilot.overlay.handler();\r\n\t\t\t\t_handler();\r\n\r\n\t\t\t});\r\n\r\n\t\t}());\r\n\r\n\t\t(function _hashToggle() {\r\n\r\n\t\t\tvar hash = window.location.hash.substr(1);\r\n\r\n\t\t\tif (hash.length > 0) {\r\n\r\n\t\t\t\tfor (var i = 0; i < navItems.length; i++) {\r\n\r\n\t\t\t\t\tif (navItems[i].getAttribute('data-target') === hash) {\r\n\r\n\t\t\t\t\t\tgoTo(navItems[i]);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}());\r\n\r\n\t\tdocument.addEventListener('DOMContentLoaded', function init() {\r\n\r\n\t\t\t// Subscribe the _handler method to Listen\r\n\t\t\t// to any changes in the 'Showcased category' topic\r\n\t\t\tWolfpilot.pubSub.subscribe('Window size', _onResize);\r\n\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\topen: open,\r\n\t\t\tclose: close,\r\n\t\t\tgoTo: goTo\r\n\t\t};\r\n\r\n\t}());\r\n\r\n\t// Projects grid gallery\r\n\tvar showcase = (function showcase() {\r\n\r\n\t\tif (!document.getElementById('js-showcase')) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.getElementById('js-showcase'),\r\n\t\t    nav = document.getElementById('js-showcase-nav'),\r\n\t\t    navTags = wrapper.getElementsByClassName('showcase__nav-item'),\r\n\t\t    projects = wrapper.getElementsByClassName('js-showcase-project'),\r\n\t\t    showcasedCategory = 'featured', // set initial category\r\n\t\t    showcasedProjects,\r\n\t\t    activeProject = [];\r\n\r\n\t\tvar getShowcasedProjects = function getShowcasedProjects() {\r\n\r\n\t\t\treturn showcasedProjects;\r\n\r\n\t\t};\r\n\r\n\t\tvar getShowcasedCategory = function getShowcasedCategory() {\r\n\r\n\t\t\treturn showcasedCategory;\r\n\r\n\t\t};\r\n\r\n\t\tvar showCategory = function showCategory(newCategory) {\r\n\r\n\t\t\tshowcasedCategory = newCategory;\r\n\t\t\tshowcasedProjects = []; // Reset the array before repopulating it again\r\n\r\n\t\t\t// Setting a timeout allows the visible projects to hide first\r\n\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\tfor (var i = 0; i < projects.length; i++) {\r\n\r\n\t\t\t\t\tvar tags = projects[i].getAttribute('data-tag').split(', ');\r\n\r\n\t\t\t\t\tfor (var j = 0; j < tags.length; j++) {\r\n\r\n\t\t\t\t\t\tif (tags[j] === newCategory) {\r\n\r\n\t\t\t\t\t\t\tlazyload(projects[i].firstElementChild);\r\n\t\t\t\t\t\t\tprojects[i].classList.add('is-visible');\r\n\t\t\t\t\t\t\t// Update the list of currently visible projects\r\n\t\t\t\t\t\t\tshowcasedProjects.push(projects[i].getAttribute('data-target'));\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, 500);\r\n\r\n\t\t\t// Publish the list of currently visible projects\r\n\t\t\tWolfpilot.pubSub.publish('Showcased projects', showcasedProjects);\r\n\r\n\t\t};\r\n\r\n\t\tvar showAll = function showAll() {\r\n\r\n\t\t\tshowcasedCategory = 'all';\r\n\t\t\tshowcasedProjects = []; // Reset the array before repopulating it again\r\n\r\n\t\t\t// Setting a timeout allows the visible projects to hide first\r\n\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\tfor (var i = 0; i < projects.length; i++) {\r\n\r\n\t\t\t\t\tlazyload(projects[i].firstElementChild);\r\n\t\t\t\t\tprojects[i].classList.add('is-visible');\r\n\t\t\t\t\t// Update the list of currently visible projects\r\n\t\t\t\t\tshowcasedProjects.push(projects[i].getAttribute('data-target'));\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, 500);\r\n\r\n\t\t\t// Publish the list of currently visible projects\r\n\t\t\tWolfpilot.pubSub.publish('Showcased projects', showcasedProjects);\r\n\r\n\t\t};\r\n\r\n\t\tvar hideAll = function hideAll() {\r\n\r\n\t\t\tfor (var i = 0; i < projects.length; i++) {\r\n\r\n\t\t\t\tprojects[i].classList.remove('is-visible');\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar _handler = function _handler(topic, newCategory) {\r\n\r\n\t\t\thideAll();\r\n\r\n\t\t\tnewCategory === 'all' ? showAll() : showCategory(newCategory);\r\n\r\n\t\t};\r\n\r\n\t\tvar toggleNav = function toggleNav(navItem) {\r\n\r\n\t\t\tfor (var i = 0; i < navTags.length; i++) {\r\n\r\n\t\t\t\tnavTags[i].classList.remove('is-active');\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnavItem.classList.add('is-active');\r\n\r\n\t\t};\r\n\r\n\t\t(function delegateEvents() {\r\n\r\n\t\t\t// listen for project clicks\r\n\t\t\twrapper.addEventListener('click', function(e) {\r\n\r\n                if (e.target.classList.contains('js-showcase-zoom') ||\r\n\t\t\t\t    (Wolfpilot.windowSize.getDimensions().wWidth > 1024 &&\r\n\t\t\t\t    Wolfpilot.windowSize.getDimensions().wHeight > 768 &&\r\n\t\t\t\t    e.target.classList.contains('showcase__project-details'))) {\r\n\r\n\t\t\t\t\tvar project = Wolfpilot.getClosestParent(e.target, '.js-showcase-project'),\r\n\t\t\t\t\t    el = document.getElementById(project.getAttribute('data-target')),\r\n\t\t\t\t\t    target = project.getAttribute('data-target');\r\n\r\n\t\t\t\t\tfor (var i = 0; i < showcasedProjects.length; i++) {\r\n\r\n\t\t\t\t\t\tif (showcasedProjects[i] === target) {\r\n\t\t\t\t\t\t\t/* Pass both the modal image we're opening\r\n\t\t\t\t\t\t\t * and its index in the currently showcased projects.\r\n\t\t\t\t\t\t\t *\r\n\t\t\t\t\t\t\t * This will open the image in a modal\r\n\t\t\t\t\t\t\t * and determine its position in the slider,\r\n\t\t\t\t\t\t\t * as well as the order of the previous and next elements.\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\tactiveProject.el = el;\r\n\t\t\t\t\t\t\tactiveProject.index = i;\r\n\t\t\t\t\t\t\t// Publish the newly-opened project\r\n\t\t\t\t\t\t\tWolfpilot.pubSub.publish('Active project', activeProject);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t// listen for category changes\r\n\t\t\tnav.addEventListener('click', function(e) {\r\n\r\n\t\t\t\tif (e.target.classList.contains('showcase__nav-item') && !e.target.classList.contains('is-active')) {\r\n\r\n\t\t\t\t\tWolfpilot.pubSub.publish('Showcased category', e.target.getAttribute('data-category'));\r\n\r\n\t\t\t\t\ttoggleNav(e.target);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t}());\r\n\r\n\t\tdocument.addEventListener('DOMContentLoaded', function init() {\r\n\r\n\t\t\t// Subscribe the _handler method to Listen\r\n\t\t\t// to any changes in the 'Showcased category' topic\r\n\t\t\tWolfpilot.pubSub.subscribe('Showcased category', _handler);\r\n\r\n\t\t\t// Calling the showCategory method publishes the list of visible projects\r\n\t\t\t// so that it can be used by the modal before any further category switches\r\n\t\t\tshowCategory(showcasedCategory);\r\n\r\n\t\t});\r\n\r\n\r\n\t\treturn {\r\n\t\t\tgetShowcasedProjects: getShowcasedProjects,\r\n\t\t\tgetShowcasedCategory: getShowcasedCategory,\r\n\t\t\tshowCategory: showCategory,\r\n\t\t\tshowAll: showAll,\r\n\t\t\thideAll: hideAll,\r\n\t\t\ttoggleNav: toggleNav\r\n\t\t};\r\n\r\n\t}());\r\n\r\n\tvar videoPlayer = (function videoPlayer() {\r\n\r\n\t\tvar videos = document.getElementsByClassName('js-video'),\r\n\t\t    video,\r\n\t\t    player,\r\n\t\t    status = 'paused';\r\n\r\n\t\tvar getStatus = function getStatus() {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tstatus: status\r\n\t\t\t};\r\n\r\n\t\t};\r\n\r\n\t\tvar pause = function pause(target) {\r\n\r\n\t\t\tvideo = Wolfpilot.getClosestParent(target, '.js-video');\r\n\t\t\tplayer = video.getElementsByClassName('js-video-player')[0];\r\n\r\n\t\t\tvideo.classList.remove('is-playing');\r\n\t\t\tplayer.pause();\r\n\r\n\t\t\tstatus = 'paused';\r\n\r\n\t\t};\r\n\r\n\t\tvar play = function play(target) {\r\n\r\n\t\t\tvideo = Wolfpilot.getClosestParent(target, '.js-video');\r\n\t\t\tplayer = video.getElementsByClassName('js-video-player')[0];\r\n\r\n\t\t\tvideo.classList.add('is-playing');\r\n\t\t\tplayer.play();\r\n\r\n\t\t\tstatus = 'playing';\r\n\r\n\t\t};\r\n\r\n\t\tvar _handler = function _handler(target) {\r\n\r\n\t\t\tstatus === 'paused' ? play(target) : pause(target);\r\n\r\n\t\t};\r\n\r\n\t\t(function delegateEvents() {\r\n\r\n\t\t\tfor (var i = 0; i < videos.length; i++) {\r\n\r\n\t\t\t\tvideos[i].addEventListener('click', function(e) {\r\n\r\n\t\t\t\t\t_handler(e.target);\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\r\n\t\t}());\r\n\r\n\t\treturn {\r\n\t\t\tgetStatus: getStatus,\r\n\t\t\tplay: play,\r\n\t\t\tpause: pause\r\n\t\t};\r\n\r\n\t}());\r\n\r\n\tvar caseStudies = (function caseStudies() {\r\n\r\n\t\tvar navItems = document.getElementsByClassName('case-studies__nav-item'),\r\n\t\t    articles = document.getElementsByClassName('case-studies__item'),\r\n\t\t    tags,\r\n\t\t    tag,\r\n\t\t    json;\r\n\r\n\t\tvar showCategory = function showCategory(newTag) {\r\n\r\n\t\t\tfor (var i = 0; i < articles.length; i++) {\r\n\r\n\t\t\t\tjson = articles[i].getAttribute('data-tags');\r\n\t\t\t\ttags = JSON.parse(json);\r\n\r\n\t\t\t\tfor (var j = 0; j < tags.length; j++) {\r\n\r\n\t\t\t\t\tif (tags[j] === newTag) {\r\n\r\n\t\t\t\t\t\tlazyload(articles[i].getElementsByClassName('case-studies__image')[0]);\r\n\t\t\t\t\t\tarticles[i].classList.remove('is-hidden');\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar showAll = function showAll() {\r\n\r\n\t\t\tfor (var i = 0; i < articles.length; i++) {\r\n\r\n\t\t\t\tlazyload(articles[i].getElementsByClassName('case-studies__image')[0]);\r\n\t\t\t\tarticles[i].classList.remove('is-hidden');\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar toggleNav = function toggleNav(newTag) {\r\n\r\n\t\t\tfor (var i = 0; i < navItems.length; i++) {\r\n\r\n\t\t\t\tif (navItems[i].getAttribute('data-target') === newTag) {\r\n\r\n\t\t\t\t\tnavItems[i].classList.add('is-active');\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\t(function init() {\r\n\r\n\t\t\tif (getQueryString('tag')) {\r\n\r\n\t\t\t\ttag = getQueryString('tag');\r\n\r\n\t\t\t\ttoggleNav(tag);\r\n\t\t\t\tshowCategory(tag);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\ttoggleNav('all');\r\n\t\t\t\tshowAll();\r\n\r\n\t\t\t}\r\n\r\n\t\t}());\r\n\r\n\t}());\r\n\r\n\treturn {\r\n\t\t/** Helpers */\r\n\t\tpubSub: pubSub,\r\n\t\twindowSize: windowSize,\r\n\t\tgetQueryString: getQueryString,\r\n\t\tgetClosestParent: getClosestParent,\r\n\t\tlazyload: lazyload,\r\n\t\teventTracking: eventTracking,\r\n\t\t/** MAIN */\r\n\t\tnavigation: navigation,\r\n\t\tscrollToY: scrollToY,\r\n\t\toverlay: overlay,\r\n\t\tmodal: modal,\r\n\t\tshowcase: showcase,\r\n\t\tvideoPlayer: videoPlayer,\r\n\t\tcaseStudies: caseStudies\r\n\t};\r\n\r\n}());\r\n"],"sourceRoot":"/source/"}